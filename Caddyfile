{
    local_certs
}

school.local, localhost, 192.168.1.100 {
    # Serve frontend
    root * /srv/frontend
    file_server

    # API proxy
    handle /api/* {
        reverse_proxy api:3000
    }

    # SPA fallback
    try_files {path} /index.html

    # Compression
    encode gzip

    # Security headers
    header {
        X-Frame-Options "SAMEORIGIN"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "strict-origin-when-cross-origin"
    }
}
